第一个任务是设计界面原型。我使用Qt Designer绘制了首页和详情页面的布局,添加了各显示信息的标签、曲线图标、日出日落占比饼图等界面元素。完成了界面原型的设计,保存为weather.ui文件。界面设计完成,为后续编码工作奠定了基础。
在界面原型的基础上,我编写了Weather类的框架,包括头文件weather.h中的变量声明和函数声明,以及weather.cpp中的构造函数实现。构造函数中加载了ui界面,并做了些初始化工作,如连接信号和槽函数。然后编写了主函数main.cpp用于测试,创建并显示Weather对象,界面可以正常加载,框架搭建完成。
随后实现了网络请求功能,编写getWeatherInfo()方法发送请求获取天气数据。并在replayFinished()槽函数中接收响应。然后解析JSON格式的天气数据,提取需要的信息,编写了parseJson()函数。解析后的数据可以显示在界面上了,编写了setLabelContent()函数来更新各标签的内容。
到此天气预报APP的基本功能实现了,我做了简单的测试,数据能正常显示。
在基本功能工作后,这两天我实现了其他附加功能,包括搜索新地点等。编写了对应的槽函数来连接信号和功能。同时绘制了日出日落占比饼图和温度折线图,这在界面显示效果上有很大提升。也处理了些异常情况,增加了友好的提示信息。基本上主要功能都实现了,我对代码进行了重构优化。
到此我认为天气APP开发的主体功能和代码已经比较稳定了。

